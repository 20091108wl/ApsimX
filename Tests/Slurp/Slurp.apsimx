<?xml version="1.0" encoding="utf-8"?>
<Simulations xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <Name>Simulations</Name>
  <Memo>
    <Name>Memo</Name>
    <MemoText><![CDATA[]]></MemoText>
  </Memo>
  <Simulation>
    <Name>Slurp</Name>
    <WeatherFile>
      <Name>WeatherFile</Name>
      <FileName>ForeverSpringNoRain.met</FileName>
    </WeatherFile>
    <Clock>
      <Name>Clock</Name>
      <StartDate>2000-01-01T00:00:00</StartDate>
      <EndDate>2000-01-31T00:00:00</EndDate>
    </Clock>
    <Summary>
      <Name>Summary</Name>
    </Summary>
    <Zone>
      <Name>Field</Name>
      <Soil>
        <Name>Soil</Name>
        <Water>
          <Name>Water</Name>
          <Thickness>
            <double>150</double>
            <double>150</double>
            <double>300</double>
            <double>300</double>
          </Thickness>
          <BD>
            <double>1</double>
            <double>1</double>
            <double>1</double>
            <double>1</double>
          </BD>
          <AirDry>
            <double>0.15</double>
            <double>0.15</double>
            <double>0.15</double>
            <double>0.15</double>
          </AirDry>
          <LL15>
            <double>0.3</double>
            <double>0.3</double>
            <double>0.3</double>
            <double>0.3</double>
          </LL15>
          <DUL>
            <double>0.55</double>
            <double>0.55</double>
            <double>0.55</double>
            <double>0.55</double>
          </DUL>
          <SAT>
            <double>0.6</double>
            <double>0.6</double>
            <double>0.6</double>
            <double>0.6</double>
          </SAT>
          <KS>
            <double>100</double>
            <double>100</double>
            <double>100</double>
            <double>100</double>
          </KS>
          <SoilCrop>
            <Name>Slurp</Name>
            <LL>
              <double>0.3</double>
              <double>0.3</double>
              <double>0.3</double>
              <double>0.3</double>
            </LL>
            <KL>
              <double>0.1</double>
              <double>0.1</double>
              <double>0.1</double>
              <double>0.1</double>
            </KL>
            <XF>
              <double>1</double>
              <double>1</double>
              <double>1</double>
              <double>1</double>
            </XF>
          </SoilCrop>
        </Water>
        <SoilWater>
          <Name>SoilWater</Name>
          <min_crit_temp>5</min_crit_temp>
          <max_crit_temp>35</max_crit_temp>
          <max_albedo>0.23</max_albedo>
          <A_to_evap_fact>0.44</A_to_evap_fact>
          <canopy_eos_coef>1.7</canopy_eos_coef>
          <sw_top_crit>0.9</sw_top_crit>
          <sumes1_max>100</sumes1_max>
          <sumes2_max>25</sumes2_max>
          <solute_flow_eff>
            <double>1</double>
          </solute_flow_eff>
          <solute_flux_eff>
            <double>1</double>
          </solute_flux_eff>
          <gravity_gradient>2E-05</gravity_gradient>
          <specific_bd>2.65</specific_bd>
          <hydrol_effective_depth>450</hydrol_effective_depth>
          <mobile_solutes>
            <string>no3</string>
            <string>urea</string>
            <string>cl</string>
            <string>br</string>
            <string>org_n</string>
            <string>org_c_pool1</string>
            <string>org_c_pool2</string>
            <string>org_c_pool3</string>
          </mobile_solutes>
          <immobile_solutes>
            <string>nh4</string>
          </immobile_solutes>
          <canopy_fact>
            <double>1</double>
            <double>1</double>
            <double>0</double>
            <double>0</double>
          </canopy_fact>
          <canopy_fact_height>
            <double>0</double>
            <double>600</double>
            <double>1800</double>
            <double>30000</double>
          </canopy_fact_height>
          <canopy_fact_default>0.5</canopy_fact_default>
          <act_evap_method>ritchie</act_evap_method>
          <irrigation_will_runoff>false</irrigation_will_runoff>
          <irrigation_layer>1</irrigation_layer>
          <obsrunoff_name />
          <SummerCona>3</SummerCona>
          <SummerU>6</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>3</WinterCona>
          <WinterU>6</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>40</DiffusConst>
          <DiffusSlope>16</DiffusSlope>
          <Salb>0.13</Salb>
          <slope>0</slope>
          <discharge_width>0</discharge_width>
          <catchment_area>0</catchment_area>
          <eo_source />
          <max_pond>0</max_pond>
          <CN2Bare>73</CN2Bare>
          <CNRed>20</CNRed>
          <CNCov>0.8</CNCov>
          <WaterTable>NaN</WaterTable>
          <Thickness>
            <double>150</double>
            <double>150</double>
            <double>300</double>
            <double>300</double>
          </Thickness>
          <SWCON>
            <double>0</double>
            <double>0</double>
            <double>0</double>
            <double>0</double>
          </SWCON>
          <KLAT>
            <double>0</double>
            <double>0</double>
            <double>0</double>
            <double>0</double>
          </KLAT>
        </SoilWater>
        <SoilNitrogen>
          <Name>SoilNitrogen</Name>
          <fom_type>
            <string>default</string>
            <string>manure</string>
            <string>mucuna</string>
            <string>lablab</string>
            <string>shemp</string>
            <string>stable</string>
          </fom_type>
          <fract_carb>
            <double>0.2</double>
            <double>0.3</double>
            <double>0.54</double>
            <double>0.57</double>
            <double>0.45</double>
            <double>0</double>
          </fract_carb>
          <fract_cell>
            <double>0.7</double>
            <double>0.3</double>
            <double>0.37</double>
            <double>0.37</double>
            <double>0.47</double>
            <double>0.1</double>
          </fract_cell>
          <fract_lign>
            <double>0.1</double>
            <double>0.4</double>
            <double>0.09</double>
            <double>0.06</double>
            <double>0.08</double>
            <double>0.9</double>
          </fract_lign>
          <wfpsN2N2O_x>
            <double>22</double>
            <double>88</double>
          </wfpsN2N2O_x>
          <wfpsN2N2O_y>
            <double>0.1</double>
            <double>1</double>
          </wfpsN2N2O_y>
          <oc>
            <double>1.0401687075031094</double>
            <double>0.8897529172580011</double>
            <double>0.88982433505222436</double>
            <double>0.88979533846202152</double>
          </oc>
        </SoilNitrogen>
        <SoilOrganicMatter>
          <Name>SoilOrganicMatter</Name>
          <RootCN>40</RootCN>
          <RootWt>200</RootWt>
          <SoilCN>12.5</SoilCN>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Thickness>
            <double>150</double>
            <double>150</double>
            <double>300</double>
            <double>300</double>
          </Thickness>
          <Depth>
            <string>0-15</string>
            <string>15-30</string>
            <string>30-60</string>
            <string>60-90</string>
          </Depth>
          <OC>
            <double>1.04</double>
            <double>0.89</double>
            <double>0.89</double>
            <double>0.89</double>
          </OC>
          <FBiom>
            <double>0.025</double>
            <double>0.02</double>
            <double>0.015</double>
            <double>0.01</double>
          </FBiom>
          <FInert>
            <double>0.4</double>
            <double>0.6</double>
            <double>0.8</double>
            <double>0.9</double>
          </FInert>
          <OCUnits>Total</OCUnits>
        </SoilOrganicMatter>
        <Analysis>
          <Name>Analysis</Name>
          <Thickness>
            <double>150</double>
            <double>150</double>
            <double>300</double>
            <double>300</double>
          </Thickness>
          <EC>
            <double>0.2</double>
            <double>0.25</double>
            <double>0.31</double>
            <double>0.4</double>
          </EC>
          <PH>
            <double>8.4</double>
            <double>8.8</double>
            <double>9</double>
            <double>9.2</double>
          </PH>
          <PHUnits>Water</PHUnits>
          <BoronUnits>HotWater</BoronUnits>
        </Analysis>
        <InitialWater>
          <Name>Initial water</Name>
          <PercentMethod>EvenlyDistributed</PercentMethod>
          <FractionFull>1</FractionFull>
          <DepthWetSoil>NaN</DepthWetSoil>
          <RelativeTo>LL15</RelativeTo>
        </InitialWater>
        <Sample>
          <Name>Sample</Name>
          <Thickness>
            <double>100</double>
            <double>200</double>
            <double>300</double>
            <double>300</double>
          </Thickness>
          <NO3>
            <double>40</double>
            <double>30</double>
            <double>14</double>
            <double>14</double>
          </NO3>
          <NH4>
            <double>0.1</double>
            <double>0.1</double>
            <double>0.1</double>
            <double>0.1</double>
          </NH4>
          <NO3Units>kgha</NO3Units>
          <NH4Units>kgha</NH4Units>
          <SWUnits>Volumetric</SWUnits>
          <OCUnits>Total</OCUnits>
          <PHUnits>Water</PHUnits>
        </Sample>
        <RecordNumber>0</RecordNumber>
        <SoilType>Uniform soil</SoilType>
        <Latitude>0</Latitude>
        <Longitude>0</Longitude>
      </Soil>
      <SurfaceOrganicMatter>
        <Name>SurfaceOrganicMatter</Name>
        <crit_residue_wt>2000</crit_residue_wt>
        <opt_temp>20</opt_temp>
        <cum_eos_max>20</cum_eos_max>
        <cnrf_coeff>0.277</cnrf_coeff>
        <cnrf_optcn>25</cnrf_optcn>
        <c_fract>0.4</c_fract>
        <leach_rain_tot>25</leach_rain_tot>
        <min_rain_to_leach>10</min_rain_to_leach>
        <crit_min_surfom_orgC>0.004</crit_min_surfom_orgC>
        <default_cpr>0</default_cpr>
        <default_standing_fraction>0</default_standing_fraction>
        <standing_extinct_coeff>0.5</standing_extinct_coeff>
        <fractionFaecesAdded>0.5</fractionFaecesAdded>
        <ResidueTypes />
        <TillageTypes>
          <Name>TillageTypes</Name>
          <TillageType />
        </TillageTypes>
        <PoolName>Slurp</PoolName>
        <type>Slurp</type>
        <mass>1000</mass>
        <standing_fraction>0</standing_fraction>
        <cnr>80</cnr>
      </SurfaceOrganicMatter>
      <Slurp>
        <Name>Slurp</Name>
        <localFrgr>1</localFrgr>
        <localLAI>5</localLAI>
        <localLAItot>5</localLAItot>
        <localCoverGreen>1</localCoverGreen>
        <localCoverTot>1</localCoverTot>
        <localCanopyHeight>500</localCanopyHeight>
        <localCanopyDepth>500</localCanopyDepth>
        <localMaximumStomatalConductance>0.011</localMaximumStomatalConductance>
        <localRootDepth>600</localRootDepth>
        <localSurfaceRootLengthDensity>0.05</localSurfaceRootLengthDensity>
        <localRootExplorationByLayer>
          <double>1</double>
          <double>1</double>
          <double>1</double>
          <double>0</double>
        </localRootExplorationByLayer>
        <localRootLengthDensityByVolume>
          <double>0.043750000000000004</double>
          <double>0.03125</double>
          <double>0.0125</double>
          <double>0</double>
        </localRootLengthDensityByVolume>
      </Slurp>
      <Arbitrator>
        <Name>Arbitrator</Name>
        <scalerPlant>
          <double>0.58006648573265951</double>
        </scalerPlant>
        <dltSWdep>
          <double>0</double>
          <double>0</double>
          <double>-0.1852960813534992</double>
          <double>0</double>
        </dltSWdep>
        <scalerLayer>
          <double>0</double>
          <double>0</double>
          <double>0.035538558445043646</double>
          <double>0</double>
        </scalerLayer>
        <scalerPlantNitrogen>
          <double>0</double>
        </scalerPlantNitrogen>
        <dltNO3>
          <double>0</double>
          <double>0</double>
          <double>0</double>
          <double>0</double>
        </dltNO3>
        <scalerLayerNitrogen>
          <double>0</double>
          <double>0</double>
          <double>0</double>
          <double>0</double>
        </scalerLayerNitrogen>
        <dltNH4>
          <double>0</double>
          <double>0</double>
          <double>0</double>
          <double>0</double>
        </dltNH4>
        <dltNitrogen>
          <double>0</double>
          <double>0</double>
          <double>0</double>
          <double>0</double>
        </dltNitrogen>
        <ArbitEOS>0</ArbitEOS>
      </Arbitrator>
      <Manager>
        <Name>SlurpUpdates</Name>
        <Script>
          <DateToUpdate>2000-01-15</DateToUpdate>
          <VariableToUpdate>LAI</VariableToUpdate>
          <tempValue>3.5</tempValue>
        </Script>
        <Code><![CDATA[using System;
using Models.Core;
using Models.PMF;
using Models.PMF.Slurp;
namespace Models
{
	[Serializable]
	[System.Xml.Serialization.XmlInclude(typeof(Model))]
	public class Script : Model
	{
		[Link] Clock Clock;
		[Link] Slurp Slurp;
		[Link] Report Report;
		[Link] Summary Summary;
		

		[Description("Date to change states or properties")] public DateTime DateToUpdate {get; set;}
		[Description("Variable to update (e.g. LAI, LAItot, CoverGreen")] public string VariableToUpdate {get; set;}        
        [Description("Value to update to")] public double tempValue { get; set; }

        //[Description("Green LAI (m2/m2)")] public double tempLAI { get; set;}
        //[Description("Total LAI (m2/m2)")] public double tempLAItot { get; set; }
        //[Description("Green cover (m2/m2)")] public double tempCoverGreen { get; set; }
        //[Description("Total cover (m2/m2)")] public double tempCoverTot { get; set; }
        //[Description("Height of the canopy (mm)")] public double tempCanopyHeight { get; set; }
        //[Description("Depth of the canopy (mm)")] public double tempCanopyDepth { get; set; }
        //[Description("Maximum stomatal conductance (m/s)")] public double tempMaximumStomatalConductance { get; set; }
        //[Description("Frgr - effect on stomatal conductance (-)")] public double tempFrgr { get; set; }
        //[Description("Nitrogen demand (kgN /ha /day)")] public double tempPotentialNitrogenDemand { get; set; }
        //[Description("Rooting Depth (mm)")] public double tempRootDepth { get; set; }
        //[Description("Root length density at the soil surface (mm/mm3)")] public double tempSurfaceRootLengthDensity { get; set; }

		public override void OnSimulationCommencing()
		{
		    
		}
		
		[EventSubscribe("DoManagement")]
		private void OnDoManagement(object sender, EventArgs e)
		{	
		    int temp = 15;
		    int temp1 = 16;
		    //if(temp1 < temp)
	        //if (Slurp.ActualEP < 10.0)	
	        //if (Math.Round(Clock.Today.Day, 0) > temp)	
			//if (Utility.Math.Round(Clock.Today.Day, 0) == Utility.Math.Round(DateToUpdate.Day,0))
			//if (Clock.Today.Day == DateToUpdate.Day)
			//if ((Clock.Today.Year == DateToUpdate.Year) && (Clock.Today.Month == DateToUpdate.Month) && (Clock.Today.Day == DateToUpdate.Day))
			if (Clock.Today > DateToUpdate)
			//if(DateTime.Compare(Clock.Today.Date, DateToUpdate.Date)==0);
			{
			    if (VariableToUpdate.Equals("LAI", StringComparison.Ordinal))
			    {
                	Summary.WriteMessage(FullPath, "Bloody if statement");
			        Slurp.CanopyProperties.LAI = tempValue;
			    }
			    else if (VariableToUpdate.Equals("LAItot", StringComparison.Ordinal))
			    {
			        Slurp.CanopyProperties.LAItot = tempValue;
			    }
			}
        }
	}
}
]]></Code>
      </Manager>
      <Report>
        <Name>Report</Name>
        <VariableNames>
          <string>[Clock].Today</string>
          <string>[Clock].Today.Day</string>
          <string>[SlurpUpdates].DateToUpdate</string>
          <string>[SlurpUpdates].tempValue</string>
          <string>[Slurp].localLAI</string>
          <string>[Slurp].CanopyProperties</string>
          <string>[Slurp].PotentialEP</string>
          <string>[Slurp].ActualEP</string>
          <string>[Slurp].potentialNitrogenDemand</string>
          <string>[Slurp].actualNitrogenSupply</string>
          <string>[Slurp].localRootDepth</string>
          <string>[Arbitrator].scalerLayer</string>
          <string>[Arbitrator].scalerPlant</string>
          <string>[Soil].SoilWater.drain</string>
          <string>[Soil].SoilWater.es</string>
          <string>[Arbitrator].dltSWdep</string>
          <string>[Soil].SoilWater.sw_dep</string>
        </VariableNames>
        <EventNames>
          <string>[Clock].DoReport</string>
        </EventNames>
      </Report>
      <Area>0</Area>
      <Slope>0</Slope>
    </Zone>
  </Simulation>
  <DataStore>
    <Name>DataStore</Name>
    <AutoExport>false</AutoExport>
  </DataStore>
  <Graph>
    <Name>Graph</Name>
    <Axis>
      <Type>Bottom</Type>
      <Title />
      <Inverted>false</Inverted>
    </Axis>
    <Axis>
      <Type>Left</Type>
      <Title />
      <Inverted>false</Inverted>
    </Axis>
    <Series>
      <Title>Series1</Title>
      <Type>Line</Type>
      <XAxis>Bottom</XAxis>
      <YAxis>Left</YAxis>
      <ColourArgb>-16776961</ColourArgb>
      <Marker>None</Marker>
      <Line>Solid</Line>
      <X>
        <TableName>Report</TableName>
        <FieldName>Clock.Today</FieldName>
      </X>
      <Y>
        <TableName>Report</TableName>
        <FieldName>Slurp.ActualEP</FieldName>
      </Y>
      <ShowRegressionLine>false</ShowRegressionLine>
      <ShowInLegend>true</ShowInLegend>
      <SplitOn>Simulation</SplitOn>
    </Series>
    <Series>
      <Title>Series2</Title>
      <Type>Line</Type>
      <XAxis>Bottom</XAxis>
      <YAxis>Left</YAxis>
      <ColourArgb>-8388480</ColourArgb>
      <Marker>None</Marker>
      <Line>Solid</Line>
      <X>
        <TableName>Report</TableName>
        <FieldName>Clock.Today</FieldName>
      </X>
      <Y>
        <TableName>Report</TableName>
        <FieldName>Slurp.actualNitrogenSupply</FieldName>
      </Y>
      <ShowRegressionLine>false</ShowRegressionLine>
      <ShowInLegend>true</ShowInLegend>
      <SplitOn>Simulation</SplitOn>
    </Series>
    <Series>
      <Title>Series3</Title>
      <Type>Line</Type>
      <XAxis>Bottom</XAxis>
      <YAxis>Left</YAxis>
      <ColourArgb>-16776961</ColourArgb>
      <Marker>None</Marker>
      <Line>Solid</Line>
      <X>
        <TableName>Report</TableName>
        <FieldName>Clock.Today</FieldName>
      </X>
      <Y>
        <TableName>Report</TableName>
        <FieldName>Slurp.PotentialEP</FieldName>
      </Y>
      <ShowRegressionLine>false</ShowRegressionLine>
      <ShowInLegend>false</ShowInLegend>
      <SplitOn>Simulation</SplitOn>
    </Series>
    <LegendPosition>TopRight</LegendPosition>
  </Graph>
  <ExplorerWidth>250</ExplorerWidth>
</Simulations>